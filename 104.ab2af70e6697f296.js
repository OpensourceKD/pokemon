(self.webpackChunkpokemon=self.webpackChunkpokemon||[]).push([[104],{8104:(b,p,i)=>{i.r(p),i.d(p,{AuthCallbackComponent:()=>c});var y=i(467),P=i(4482),h=i(9350),d=i(7707),t=i(4332),r=i(6406),m=i(8662);function o(n,g){1&n&&(t.\u0275\u0275elementStart(0,"p"),t.\u0275\u0275text(1,"Processing authentication..."),t.\u0275\u0275elementEnd())}let c=(()=>{class n{constructor(e,s,a){this.route=e,this.router=s,this.authService=a,this.message="Processing authentication...",this.isProcessing=!0}ngOnInit(){var e=this;return(0,y.A)(function*(){let s=null,a=null,l=null;const u=yield function f(n,g){const e="object"==typeof g;return new Promise((s,a)=>{const l=new d.Ms({next:u=>{s(u),l.unsubscribe()},error:a,complete:()=>{e?s(g.defaultValue):a(new h.G)}});n.subscribe(l)})}(e.route.queryParams);if(u&&Object.keys(u).length>0)s=u.code??null,a=u.state??null,l=u.error??null;else{const v=new URLSearchParams(window.location.search);s=v.get("code"),a=v.get("state"),l=v.get("error")}if(l)return e.message=`Authentication failed: ${l}`,e.isProcessing=!1,void setTimeout(()=>e.router.navigate(["/"]),3e3);if(s&&a)try{(yield e.authService.handleCallback(s,a))?(e.message="Authentication successful! Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),1500)):(e.message="Authentication failed. Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),3e3))}catch{e.message="Authentication failed (exception). Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),3e3)}else e.message="Invalid callback parameters. Redirecting...",e.isProcessing=!1,setTimeout(()=>e.router.navigate(["/"]),3e3)})()}static{this.\u0275fac=function(s){return new(s||n)(t.\u0275\u0275directiveInject(r.nX),t.\u0275\u0275directiveInject(r.Ix),t.\u0275\u0275directiveInject(m.AuthService))}}static{this.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-auth-callback"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:5,vars:2,consts:[[2,"display","flex","justify-content","center","align-items","center","height","100vh"],[2,"text-align","center"],[4,"ngIf"]],template:function(s,a){1&s&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(4,o,2,0,"p",2),t.\u0275\u0275elementEnd()()),2&s&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(a.message),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",a.isProcessing))},dependencies:[P.CommonModule,P.NgIf],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100vh}"]})}}return n})()},467:(b,p,i)=>{function y(h,d,f,t,r,m,o){try{var c=h[m](o),n=c.value}catch(g){return void f(g)}c.done?d(n):Promise.resolve(n).then(t,r)}function P(h){return function(){var d=this,f=arguments;return new Promise(function(t,r){var m=h.apply(d,f);function o(n){y(m,t,r,o,c,"next",n)}function c(n){y(m,t,r,o,c,"throw",n)}o(void 0)})}}i.d(p,{A:()=>P})}}]);